{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Total War Script",
  "patterns": [
    {
      "include": "#keywords"
    },
    {
      "include": "#constants"
    },
    {
      "include": "#functions"
    },
    {
      "include": "#console_commands"
    },
    {
      "include": "#events"
    },
    {
      "include": "#strings"
    },
    {
      "include": "#comments"
    }
  ],
  "repository": {
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.total_war_script",
          "match": "\\b(if|end_if|monitor_event|end_monitor|terminate_monitor|for_each|end_for|in)\\b"
        },
        {
          "name": "keyword.other.total_war_script",
          "match": "\\blocal|script|end_script\\b"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.total_war_script",
          "match": "\\b(and|not)\\b"
        },
        {
          "name": "constant.numeric.total_war_script",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "functions": {
      "patterns": [
        {
          "name": "entity.name.function.total_war_script",
          "match": "\\bconsole_command\\b"
        },
        {
          "comment": "Functions relating to counters",
          "name": "entity.name.function.total_war_script",
          "match": "\\b(declare_counter|declare_persistent_counter|inc_counter|set_counter|store_counter|retrieve_counter)\\b"
        }
      ]
    },
    "console_commands": {
      "name": "entity.name.function.total_war_script",
      "match": "\\b(add_money|add_population|adjust_sea_bed|ai_turn_speed|amdb_max|amdb_min|amdb_offset|auto_win|bestbuy|bounds|building_debug|burn_piggies_burn|capture_settlement|character_reset|clear_messages|control|create_building|create_unit|damage_wall|date|dec_nwskip|diplomacy_mission|diplomatic_stance|disable_ai|dump_fac_score|dump_fertility|event|filter_coastlines|fire|force_battle_defeat|force_battle_victory|force_diplomacy|give_ancillary|give_trait|give_trait_points|halt_ai|highlight_construction|highlight_recruitment|highlight_soldier|ie|inc_nwskip|invulnerable_general|jericho|kill_character|kill_faction|lights|list_ancillaries|list_characters|list_traits|list_units|message_collation_set|move_character|mp|nw_stats|oliphaunt|output_unit_positions|perf_times|process_cq|process_rq|puppify_my_love|reapply_rigid_model_influence|regenerate_radar|reload_shaders|reload_textures|reset_display|run_ai|season|set_building_health|set_ranking_interval|shadow|show_all_messages|show_battle_circle|show_battle_line|show_battle_marker|show_battle_paths|show_battle_paths_for_unit|show_battle_street_plan|show_cursorstat|show_landings|show_terrain_lines|surrender_regions|test_ancillary_localisation|test_domination_scroll|test_message|test_network_scroll|test_victory_scroll|toggle_chat_log|toggle_coastlines|toggle_flowing_water|toggle_fow|toggle_game_update|toggle_overlay|toggle_perfect_spy|toggle_pr|toggle_restrictcam|toggle_terrain|toggle_tow|toggle_underlay|trigger_advice|upgrade_effect|victory|write_ui_cache|zoom|zoom_to_unit)\\b"
    },
    "events": {
      "name": "entity.name.type.total_war_script",
      "match": "\\b(PreBattle|PreBattleWithdrawal|BattleAiCommenced|BattleDelayPhaseCommenced|BattleDeploymentPhaseCommenced|BattleConflictPhaseCommenced|BattlePlayerUnitAttacksEnemyUnit|BattleEnemyUnitAttacksPlayerUnit|BattlePlayerAttacksSettlementBuilding|BattleEnemyAttacksSettlementBuilding|BattleUnitGoesBerserk|BattlePlayerUnitGoesBerserk|BattleEnemyUnitGoesBerserk|BattleUnitRouts|BattlePlayerUnitRouts|BattleEnemyUnitRouts|BattlePlayerSiegeEngineDestroyed|BattleEnemySiegeEngineDestroyed|PostBattle|BattleArmyRouted|BattleGeneralKilled|BattleGeneralRouted|BattleReinforcementsArrive|BattleSiegeEngineDestroyed|BattleSiegeEngineDocksWall|BattleGatesAttackedByEngine|BattleGatesAttackedByPlayerEngine|BattleGatesAttackedByEnemyEngine|BattleBattleGatesDestroyedByEngine|BattleWallsBreachedByEngine|BattleWallsCaptured|BattleFinished|EnteredCityView|BattleMinimapAction|BattlePlayerUnitSelected|EnterTacticalMode|BattleReinforcementsHack|FactionTurnStart|FactionWarDeclared|HordeFormed|FactionTurnEnd|HireMercenaries|GeneralCaptureResidence|GeneralCaptureWonder|GeneralCaptureSettlement|LeaderDestroyedFaction|Disaster|CharacterDamagedByDisaster|GeneralAssaultsResidence|OfferedForAdoption|LesserGeneralOfferedForAdoption|OfferedForMarriage|BrotherAdopted|BecomesFactionLeader|BecomesFactionHeir|TakeOffice|CeasedFactionLeader|CeasedFactionHeir|LeaveOffice|UngarrisonedFort|LostLegionaryEagle|CapturedLegionaryEagle|RecapturedLegionaryEagle|SenateExposure|QuaestorInvestigationMinor|QuaestorInvestigation|QuaestorInvestigationMajor|PopularSupportForOverthrow|SenateReadyToOutlawFaction|SenateOutlawsFaction|NewTurnStart|ScriptPromptCallback|FactionDestroyed|Birth|CharacterComesOfAge|CharacterMarries|CharacterBecomesAFather|CharacterTurnStart|CharacterTurnEnd|CharacterTurnEndInSettlement|GeneralDevastatesTile|ConstructionItemClicked|RecruitmentItemClicked|RecruitmentPopulated|ConstructionPopulated|AgentListPopulated|MoveRetinuePopulated|MoveRetinuePressed|MoveRetinueAncillarySelected|MoveRetinueAncillaryDeselected|MissionSelected|AgentSelected|ScrollDidOpen|UnitHasRouted|BattleUnitActionStatus|DiplomacyScrollPopulated|ItemDeselected|UnitInfoOpened|AdvisorAudioStopped|SpyMission|ExecutesASpyOnAMission|LeaderOrderedSpyingMission|AssassinationMission|ExecutesAnAssassinOnAMission|LeaderOrderedAssassination|SufferAssassinationAttempt|SabotageMission|LeaderOrderedSabotage|BriberyMission|LeaderOrderedBribery|AcceptBribe|RefuseBribe|Insurrection|DiplomacyMission|LeaderOrderedDiplomacy|LeaderSenateMissionSuccess|LeaderSenateMissionFailed|SettlementTurnStart|SettlementTurnEnd|NewAdmiralCreated|UnitTrained|GovernorUnitTrained|BuildingCompleted|GovernorBuildingCompleted|PlugInCompleted|GovernorPlugInCompleted|AgentCreated|GovernorAgentCreated|BuildingDestroyed|GovernorBuildingDestroyed|CityRiots|GovernorCityRiots|CityRebels|GovernorCityRebels|GovernorThrowGames|GovernorThrowRaces|UngarrisonedSettlement|EnslavePopulation|ExterminatePopulation|CitySacked|CharacterSelected|SettlementSelected|EnemySettlementSelected|MultiTurnMove|CharacterPanelOpen|SettlementPanelOpen|FinancesPanelOpen|FactionSummaryPanelOpen|FamilyTreePanelOpen|DiplomaticStandingPanelOpen|SenateMissionsPanelOpen|SenateOfficesPanelOpen|DiplomacyPanelOpen|PreBattlePanelOpen|RecruitmentPanelOpen|ConstructionPanelOpen|TradePanelOpen|HireMercenariesPanelOpen|NavalAutoResolvePanelOpen|IncomingMessage|MessageOpen|RequestBuildingAdvice|RequestTrainingAdvice|RequestMercenariesAdvice|ButtonPressed|ShortcutTriggered|ScrollOpened|ScrollClosed|AdviceSupressed|ScrollAdviceRequested|PreBattleScrollAdviceRequested|NavalPreBattleScrollAdviceRequested|SettlementScrollAdviceRequested|Idle|AbandonShowMe|ScriptedAdvice|DeclineAutomatedSettlementManagement|EscPressed|GameReloaded|FirstStratUpdates|MovieStopped|SelectionAssistPossible|SettlementButtonPressed|WorldScriptTerminate|CampaignHudShown|ContextPopupInteraction|DiplomacyConstructingOffer|DiplomacyConstructingCounterOffer|DiplomacyOpponentPresentsOffer|DiplomacyOpponentPresentsCounterOffer|FactionSummary|FactionSenate|FactionSenatePolicy|FactionSenateMissions|FactionSenateOfficials|FactionSenateFloor|FactionFactions|FactionDetails|FactionFamilyTree|FactionRankings|FactionLists|SettlementCharacter|SettlementTrade|SettlementOverview|SpySelected|DiplomatSelected|AssassinSelected|FleetSelected|CampaignMapGesture|CampaignDoingBadly|BattleMapGesture|HideBattleUI|FeralNewsVisible|AgentHubOpened|MoveRetinueOpened|OwnFactionDetailsOpened|DiplomaticStandingShown|FactionFinancesShown|FamilyTreeShown|SendAgentPanel|SettlementDetailsShown|CharacterInfoScreen|FriendlyCharacterSelected|EnemyCharacterSelected|FriendlySettlementSelected|EnemySettlementSelected|MapOverlayOpened|SiegeDetailsShown|PreBattleScreen|TacticalMapShown|PostBattleScreen|UnitsGrouped|EnteredBattle|AdvisorOpened|FormationTypesShown|MerchantSelected|NavalCombatStarted|MergeArmiesOpened|RoutesBlockaded|ElectionResults|BattleToggleMenu|AmbushMode|NewsTabClosed|NewsTabOpened|BattleNewsTabOpened|QuickListsOpened|EmbargoIsAvailable|RebelCharacterSelected|HighTaxesCauseDisorder|FailedToEndTurn)\\b"
    },
    "strings": {
      "name": "string.quoted.double.total_war_script",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.total_war_script",
          "match": "\\\\."
        }
      ]
    },
    "comments": {
      "name": "comment.line.total_war_script",
      "begin": ";",
      "end": "\\n"
    }
  },
  "scopeName": "source.total_war_script"
}